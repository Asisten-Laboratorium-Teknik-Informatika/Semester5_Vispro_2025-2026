<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>SATU Pesan - Sistem Pemesanan</title>
    <meta name="theme-color" content="rgb(255, 128, 0)" />
    <link rel="stylesheet" href="assets/css/style.css" />
  </head>
  <body>
    <!-- Overlay for mobile sidebar -->
    <div class="sidebar-overlay" id="sidebar-overlay"></div>
    <!-- Overlay for mobile cart -->
    <div class="cart-overlay" id="cart-overlay"></div>

    <div class="app-container">
      <!-- Sidebar Navigation -->
      <nav class="nav-sidebar" id="nav-sidebar">
        <!-- Added close button for mobile -->
        <button class="nav-close-btn" id="nav-close-btn">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M18 6 6 18" />
            <path d="m6 6 12 12" />
          </svg>
        </button>

        <div class="nav-logo">
          <svg
            class="logo-svg"
            viewBox="0 0 48 48"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <rect width="48" height="48" rx="12" fill="rgb(255, 128, 0)" />
            <path
              d="M16 12h16v6h-10v6h8v6h-8v6h10v6H16V12z"
              fill="white"
              fill-opacity="0.15"
            />
            <path
              d="M15 18a2 2 0 012-2h14a2 2 0 012 2v16a2 2 0 01-2 2H17a2 2 0 01-2-2V18z"
              fill="white"
            />
            <path
              d="M20 20v-4a4 4 0 018 0v4"
              stroke="rgb(255, 128, 0)"
              stroke-width="2.5"
              stroke-linecap="round"
            />
            <circle cx="36" cy="14" r="8" fill="#10b981" />
            <path
              d="M32 14l2.5 2.5L39 12"
              stroke="white"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
          <div class="logo-text">
            <span class="logo-title">SATU</span>
            <span class="logo-subtitle">Pesan</span>
          </div>
        </div>

        <div class="nav-menu">
          <a href="index.html" class="nav-item active">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <rect width="7" height="9" x="3" y="3" rx="1" />
              <rect width="7" height="5" x="14" y="3" rx="1" />
              <rect width="7" height="9" x="14" y="12" rx="1" />
              <rect width="7" height="5" x="3" y="16" rx="1" />
            </svg>
            <span>Kasir</span>
          </a>
        </div>

        <div class="nav-footer">
          <div class="user-info">
            <div class="user-avatar">K</div>
            <div class="user-details">
              <span class="user-name">Kasir</span>
              <span class="user-role">Admin</span>
            </div>
          </div>
        </div>
      </nav>

      <!-- Main Content -->
      <main class="main-content">
        <!-- Added mobile header with hamburger menu and cart button -->
        <div class="mobile-header" id="mobile-header">
          <button class="hamburger-btn" id="hamburger-btn">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <line x1="4" x2="20" y1="12" y2="12" />
              <line x1="4" x2="20" y1="6" y2="6" />
              <line x1="4" x2="20" y1="18" y2="18" />
            </svg>
          </button>
          <div class="mobile-logo">
            <svg
              class="logo-svg-small"
              viewBox="0 0 48 48"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <rect width="48" height="48" rx="12" fill="rgb(255, 128, 0)" />
              <path
                d="M15 18a2 2 0 012-2h14a2 2 0 012 2v16a2 2 0 01-2 2H17a2 2 0 01-2-2V18z"
                fill="white"
              />
              <path
                d="M20 20v-4a4 4 0 018 0v4"
                stroke="rgb(255, 128, 0)"
                stroke-width="2.5"
                stroke-linecap="round"
              />
              <circle cx="36" cy="14" r="8" fill="#10b981" />
              <path
                d="M32 14l2.5 2.5L39 12"
                stroke="white"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
            <span>SATU Pesan</span>
          </div>
          <button class="mobile-cart-btn" id="mobile-cart-btn">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <circle cx="8" cy="21" r="1" />
              <circle cx="19" cy="21" r="1" />
              <path
                d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"
              />
            </svg>
            <span class="cart-badge" id="mobile-cart-badge">0</span>
          </button>
        </div>

        <!-- Header -->
        <header class="header">
          <div class="header-left">
            <h1 class="page-title">Menu Produk</h1>
            <p class="page-subtitle">
              Pilih produk untuk ditambahkan ke pesanan
            </p>
          </div>
          <div class="header-right">
            <div class="date-display">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <rect width="18" height="18" x="3" y="4" rx="2" ry="2" />
                <line x1="16" x2="16" y1="2" y2="6" />
                <line x1="8" x2="8" y1="2" y2="6" />
                <line x1="3" x2="21" y1="10" y2="10" />
              </svg>
              <span id="current-date"></span>
            </div>
          </div>
        </header>

        <!-- Search & Filter -->
        <div class="search-filter">
          <div class="search-box">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <circle cx="11" cy="11" r="8" />
              <path d="m21 21-4.3-4.3" />
            </svg>
            <input type="text" id="search-input" placeholder="Cari produk..." />
          </div>
          <div class="filter-group">
            <select id="category-filter" class="filter-select">
              <option value="">Semua Kategori</option>
            </select>
          </div>
        </div>

        <!-- Category Pills -->
        <div class="category-pills" id="category-pills">
          <button class="category-pill active" data-category="">Semua</button>
        </div>

        <!-- Products Grid -->
        <div class="products-grid" id="products-grid">
          <div class="loading" style="grid-column: 1/-1">
            <div class="spinner"></div>
          </div>
        </div>
      </main>

      <!-- Sidebar Cart -->
      <aside class="sidebar" id="cart-sidebar">
        <!-- Added close button for mobile cart -->
        <button class="cart-close-btn" id="cart-close-btn">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M18 6 6 18" />
            <path d="m6 6 12 12" />
          </svg>
        </button>

        <!-- Cart Header -->
        <div class="cart-header">
          <div class="cart-header-top">
            <h2>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="22"
                height="22"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <circle cx="8" cy="21" r="1" />
                <circle cx="19" cy="21" r="1" />
                <path
                  d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"
                />
              </svg>
              Pesanan Saat Ini
            </h2>
            <span class="cart-count" id="cart-count">0</span>
          </div>
          <button
            class="clear-cart-btn"
            id="clear-cart-btn"
            style="display: none"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M3 6h18" />
              <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6" />
              <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2" />
            </svg>
            Kosongkan
          </button>
        </div>

        <!-- Cart Items -->
        <div class="cart-items" id="cart-items">
          <div class="cart-empty">
            <div class="cart-empty-icon">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="48"
                height="48"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <circle cx="8" cy="21" r="1" />
                <circle cx="19" cy="21" r="1" />
                <path
                  d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"
                />
              </svg>
            </div>
            <p class="cart-empty-title">Belum ada pesanan</p>
            <p class="cart-empty-subtitle">
              Klik produk untuk menambahkan ke pesanan
            </p>
          </div>
        </div>

        <!-- Cart Footer -->
        <div class="cart-footer">
          <div class="cart-summary">
            <div class="summary-row">
              <span>Subtotal</span>
              <span id="cart-subtotal">Rp 0</span>
            </div>
            <div class="summary-row total">
              <span>Total Pembayaran</span>
              <span id="cart-total">Rp 0</span>
            </div>
          </div>
          <button class="checkout-btn" id="checkout-btn" disabled>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <rect width="20" height="14" x="2" y="5" rx="2" />
              <line x1="2" x2="22" y1="10" y2="10" />
            </svg>
            Bayar Sekarang
          </button>
        </div>
      </aside>
    </div>

    <!-- Toast Container -->
    <div id="toast-container"></div>

    <!-- Payment Modal -->
    <div class="modal-overlay" id="payment-modal">
      <div class="modal">
        <div class="modal-header">
          <h3>Pembayaran</h3>
          <button class="close-btn" id="close-payment-modal">&times;</button>
        </div>
        <div class="modal-body">
          <div class="total-display">
            <label>Total yang harus dibayar</label>
            <span id="modal-total">Rp 0</span>
          </div>

          <!-- Added buyer name input field -->
          <div class="form-group buyer-name-group">
            <label for="buyer-name">Nama Pembeli</label>
            <input
              type="text"
              id="buyer-name"
              placeholder="Masukkan nama pembeli"
              maxlength="100"
            />
          </div>

          <div class="payment-methods">
            <label class="payment-label">Metode Pembayaran</label>
            <div class="payment-options">
              <div class="payment-method active" data-method="cash">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="28"
                  height="28"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <rect width="20" height="12" x="2" y="6" rx="2" />
                  <circle cx="12" cy="12" r="2" />
                  <path d="M6 12h.01M18 12h.01" />
                </svg>
                <span>Tunai</span>
              </div>
              <div class="payment-method" data-method="qris">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="28"
                  height="28"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <rect width="5" height="5" x="3" y="3" rx="1" />
                  <rect width="5" height="5" x="16" y="3" rx="1" />
                  <rect width="5" height="5" x="3" y="16" rx="1" />
                  <path d="M21 16h-3a2 2 0 0 0-2 2v3" />
                  <path d="M21 21v.01" />
                  <path d="M12 7v3a2 2 0 0 1-2 2H7" />
                  <path d="M3 12h.01" />
                  <path d="M12 3h.01" />
                  <path d="M12 16v.01" />
                  <path d="M16 12h1" />
                  <path d="M21 12v.01" />
                  <path d="M12 21v-1" />
                </svg>
                <span>QRIS</span>
              </div>
            </div>
          </div>

          <div id="cash-form" class="payment-form">
            <div class="form-group">
              <label>Jumlah Uang Diterima</label>
              <input
                type="number"
                id="amount-paid"
                placeholder="Masukkan jumlah uang"
                min="0"
                oninput="calculateChange()"
              />
            </div>
            <div class="change-display" id="change-display">
              <label>Kembalian</label>
              <span id="change-amount">Rp 0</span>
            </div>
          </div>

          <div id="qris-form" class="payment-form" style="display: none">
            <div class="qris-container">
              <img
                src="public/qris-payment-qr-code.jpg"
                alt="QRIS Code"
                class="qris-image"
              />
              <p class="qris-text">Scan QR code untuk melakukan pembayaran</p>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button
            class="pay-btn"
            id="pay-btn"
            disabled
            onclick="processPayment()"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <polyline points="20 6 9 17 4 12" />
            </svg>
            Konfirmasi Pembayaran
          </button>
        </div>
      </div>
    </div>

    <!-- Success Modal -->
    <div class="modal-overlay" id="success-modal">
      <div class="modal">
        <div class="success-content">
          <div class="success-icon">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <polyline points="20 6 9 17 4 12" />
            </svg>
          </div>
          <h3>Pesanan Dikirim!</h3>
          <p>Pesanan sedang menunggu persetujuan admin</p>
          <p id="transaction-id"></p>
          <button class="new-transaction-btn" id="new-transaction-btn">
            Transaksi Baru
          </button>
        </div>
      </div>
    </div>

    <script src="assets/js/app.js"></script>
  </body>
</html>
